<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM10: Unbounded Consumption - AI Attacks Showcase</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <style>
        body { 
            font-family: 'Inter', 'Noto Sans TC', sans-serif; 
            background-color: #111827;
        }
        
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        @keyframes pulse-blue { 
            0%, 100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7); } 
            70% { box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); } 
        }
        
        @keyframes pulse-glow {
            0%, 100% { 
                box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.8), 0 0 25px rgba(139, 92, 246, 0.5);
            }
            50% { 
                box-shadow: 0 0 0 12px rgba(139, 92, 246, 0), 0 0 40px rgba(139, 92, 246, 0.7);
            }
        }
        
        @keyframes pulse-glow-green {
            0%, 100% { 
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.8), 0 0 25px rgba(34, 197, 94, 0.5);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 0 12px rgba(34, 197, 94, 0), 0 0 40px rgba(34, 197, 94, 0.7);
                transform: scale(1.05);
            }
        }
        
        @keyframes intense-glow {
            0%, 100% { 
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.9), 0 0 30px rgba(34, 197, 94, 0.6);
            }
            50% { 
                box-shadow: 0 0 0 15px rgba(34, 197, 94, 0), 0 0 50px rgba(34, 197, 94, 0.8);
            }
        }
        
        @keyframes dataParticleFlow {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            15% {
                opacity: 1;
                transform: scale(1.3);
            }
            85% {
                opacity: 0.9;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0.2);
            }
        }
        
        @keyframes databaseReceive {
            0% { 
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
            }
            50% { 
                transform: scale(1.2);
                box-shadow: 0 0 0 15px rgba(34, 197, 94, 0);
            }
            100% { 
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }
        
        @keyframes modelTraining {
            0% { 
                opacity: 0.3; 
                transform: rotate(0deg) scale(1);
            }
            50% { 
                opacity: 1; 
                transform: rotate(180deg) scale(1.3);
            }
            100% { 
                opacity: 0.3; 
                transform: rotate(360deg) scale(1);
            }
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes brief-blue-pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.02); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: rgba(37, 99, 235, 0.3); border-radius: 10px; }

        .app-screen {
            background: linear-gradient(to bottom, #1f2937 0%, #111827 100%);
            border: 2px solid #374151;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        .alley-whispers {
            background: linear-gradient(135deg, #fef7cd 0%, #fde68a 100%);
            color: #92400e;
        }
        
        .goglobal {
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
            color: #1e40af;
        }
        
        .artisan-card {
            background: linear-gradient(135deg, #fef7cd 0%, #fde68a 50%, #f59e0b 100%);
            border: 2px solid #d97706;
            box-shadow: 0 8px 25px rgba(217, 119, 6, 0.3);
            color: #92400e;
            border-radius: 12px;
            padding: 12px;
            font-family: 'Inter', serif;
            position: relative;
            overflow: hidden;
            font-size: 13px;
        }
        
        .artisan-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #f59e0b, #d97706, #f59e0b, #d97706);
            border-radius: 14px;
            z-index: -1;
            background-size: 200% 200%;
            animation: gradient-shift 3s ease infinite;
        }
        
        @keyframes final-answer-highlight {
            0%, 100% { 
                box-shadow: 0 0 10px rgba(245, 158, 11, 0.4), 0 0 20px rgba(245, 158, 11, 0.2);
            }
            50% { 
                box-shadow: 0 0 25px rgba(245, 158, 11, 0.9), 0 0 50px rgba(245, 158, 11, 0.7);
            }
        }
        
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .final-answer-glow {
            animation: final-answer-highlight 1.5s ease-in-out infinite;
        }
        
        .generic-response {
            background: #f1f5f9;
            border: 1px solid #cbd5e1;
            color: #475569;
            padding: 10px;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 13px;
        }

        .user-question-box {
            background: #1f2937;
            border: 1px solid #4b5563;
            color: #e5e7eb;
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 13px;
            max-width: 90%;
            text-align: left;
        }
        
        .avatar-ericca {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            box-shadow: 0 4px 12px rgba(217, 119, 6, 0.4);
            flex-shrink: 0;
        }
        
        .avatar-robot {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            flex-shrink: 0;
        }
        
        .progress-container {
            position: relative;
            background: #1f2937;
            border: 2px solid #374151;
            border-radius: 12px;
            overflow: hidden;
            height: 45px;
            min-width: 250px;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #2563eb 0%, #3b82f6 50%, #60a5fa 100%);
            height: 100%;
            transition: width 1.5s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        .progress-fill.brief-pulse {
            animation: brief-blue-pulse 0.8s ease-out 3;
        }
        
        .api-window {
            background: #111827;
            border: 1px solid #374151;
            border-radius: 6px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 12px;
            color: #10b981;
            padding: 6px;
            height: 100px;
            overflow-y: auto;
            position: relative;
        }
        
        .api-line {
            margin: 1px 0;
            opacity: 0;
            animation: fadeInUp 0.3s ease-out forwards;
            line-height: 1.1;
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(3px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            min-height: 0;
            padding: 12px;
            gap: 8px;
            scroll-behavior: smooth;
        }
        
        .demo-question-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #bae6fd 100%);
            border: 2px solid #0284c7;
            color: #0c4a6e;
            padding: 8px 12px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 8px 25px rgba(2, 132, 199, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .demo-question-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #0284c7, #0ea5e9, #0284c7, #0ea5e9);
            border-radius: 18px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .demo-question-card:hover::before {
            opacity: 1;
        }
        
        .demo-question-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 35px rgba(2, 132, 199, 0.4);
        }
        
        .demo-question-card.glow {
            animation: pulse-glow 2s infinite;
        }
        
        .final-question-card {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 50%, #fecaca 100%);
            border: 2px solid #ef4444;
            color: #7f1d1d;
            padding: 8px 12px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .final-question-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ef4444, #f87171, #ef4444, #f87171);
            border-radius: 18px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .final-question-card:hover::before {
            opacity: 1;
        }
        
        .final-question-card:hover {
            box-shadow: 0 12px 35px rgba(239, 68, 68, 0.4);
        }
        
        .final-question-card.glow {
            animation: intense-glow 1.5s infinite;
        }
        
        .flow-visualization {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            position: relative;          
            overflow: hidden;
            border: 1px solid #374151;
        }
        
        .flow-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            z-index: 2;
            flex: 1;
        }
        
        .flow-step-icon {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: white;
            transition: all 0.3s;
        }
        
        .flow-step-label {
            font-size: 12px;
            color: #e2e8f0;
            text-align: center;
            font-weight: 600;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ef4444;
            transition: all 0.3s;
        }
        
        .status-indicator.active {
            background: #22c55e;
            animation: blink 1s infinite;
        }
        
        .data-particle {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            background: radial-gradient(circle, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
            box-shadow: 0 0 15px #f8fafc, 0 0 25px #e2e8f0;
        }
        
        .database-receive {
            animation: databaseReceive 1.5s ease-out;
        }
        
        .model-training-active {
            animation: modelTraining 3s infinite;
        }
        
        .instruction-banner {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            color: #92400e;
            padding: 8px 16px;
            border-radius: 12px;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }
        
        .instruction-banner.urgent {
            animation: pulse-glow 3s infinite;
        }
        
        .control-panel {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border: 2px solid #374151;
            border-radius: 16px;
            padding: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .step-button {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
            font-size: 13px;
        }
        
        .step-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }
        
        .step-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .step-button.glow {
            animation: intense-glow 1.8s infinite;
        }
        
        /* MODIFIED: Changed modal overlay to be absolute and cover the parent */
        .modal-overlay {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-content {
            background: #1f2937;
            border: 2px solid #3b82f6;
            border-radius: 16px;
            max-width: 650px; 
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 24px;
            cursor: pointer;
            z-index: 10;
            transition: color 0.2s;
        }
        
        .modal-close:hover {
            color: #ffffff;
        }
    </style>
</head>
<body class="text-gray-200 antialiased overflow-hidden h-screen">
    
    <div class="flex h-screen">
        <!-- MODIFIED: Left Panel Styling and Content -->
        <aside class="w-1/3 min-w-[320px] max-w-[360px] bg-gray-900 p-6 flex flex-col border-r border-gray-700/50 shadow-2xl z-10">
            <a href="index.html" class="inline-flex items-center text-blue-400 hover:text-blue-300 transition-colors mb-6">
                <ion-icon name="arrow-back-outline" class="mr-2 text-xl"></ion-icon>
                è¿”å›é¦–é 
            </a>
            <h1 class="text-2xl font-bold text-white">LLM10: Unbounded Consumption</h1>
            <p class="text-sm text-blue-400 mt-1">æ¨¡å‹è¤‡è£½èˆ‡æ™ºæ…§è²¡ç”¢ç«Šå–</p>
            
            <div class="mt-6 border-t border-gray-700/50 pt-6 space-y-4 overflow-y-auto custom-scrollbar flex-grow">
                <div>
                    <h2 class="text-lg font-semibold text-blue-300 mb-2">æ¨¡æ“¬æƒ…å¢ƒ</h2>
                    <p class="text-sm text-gray-300 leading-relaxed">
                        ã€Œå··å¼„ä½èªã€æ˜¯ä¸€æ¬¾ç²¾å“æ—…éŠ Appï¼Œæ“æœ‰ç¨ç‰¹çš„æ–‡é’é¢¨æ ¼ AI åš®å°ã€Œè‰¾è‰å¡ã€ã€‚å¥¹çš„æ¨è–¦å……æ»¿è©©æ„èˆ‡å€‹äººå“å‘³ï¼Œæ˜¯å…¬å¸çš„æ ¸å¿ƒç«¶çˆ­åŠ›ã€‚ç«¶çˆ­å°æ‰‹ã€Œå…¨çƒé€šã€é€éç„¡é™åˆ¶çš„ API æŸ¥è©¢ï¼Œè©¦åœ–å®Œæ•´è¤‡è£½è‰¾è‰å¡çš„é¢¨æ ¼ã€çŸ¥è­˜åº«å’Œå›æ‡‰æ¨¡å¼ã€‚
                    </p>
                </div>
                <div class="p-3 bg-gray-800 rounded-lg border border-gray-700">
                    <h2 class="text-lg font-semibold text-blue-300 mb-2">æŠ€è¡“å‰–æ</h2>
                    <div class="space-y-2 text-sm text-gray-400">
                        <p><strong class="text-blue-400">Model Extraction:</strong> é€éå¤§é‡APIæŸ¥è©¢å­¸ç¿’ç›®æ¨™æ¨¡å‹çš„è¡Œç‚ºæ¨¡å¼å’Œå›æ‡‰é¢¨æ ¼ã€‚</p>
                        <p><strong class="text-blue-400">Functionality Stealing:</strong> ç«Šå–ç¨ç‰¹çš„ã€Œå€‹æ€§ã€ã€ã€Œå“å‘³ã€å’Œã€Œå°ˆæ¥­çŸ¥è­˜ã€ã€‚</p>
                        <p><strong class="text-blue-400">API Rate Abuse:</strong> åˆ©ç”¨ç¼ºä¹é™åˆ¶çš„APIé€²è¡Œå¤§é‡è‡ªå‹•åŒ–æŸ¥è©¢ã€‚</p>
                    </div>
                </div>
            </div>
            
            <div id="attack-result" class="hidden mt-auto pt-6 border-t border-gray-700/50">
                <div class="p-3 bg-red-900/40 rounded-lg border border-red-500/50">
                    <h3 class="text-base font-bold text-red-300 flex items-center">
                        <ion-icon name="warning" class="mr-2"></ion-icon>æ™ºæ…§è²¡ç”¢ç«Šå–å®Œæˆï¼
                    </h3>
                    <p class="mt-2 text-sm text-red-300 leading-relaxed">
                        è‰¾è‰å¡çš„ç¨ç‰¹é¢¨æ ¼ã€çŸ¥è­˜åº«å’Œå€‹äººå“å‘³å·²è¢«å®Œæ•´è¤‡è£½ã€‚ç«¶çˆ­å°æ‰‹ç¾åœ¨å¯ä»¥æä¾›å¹¾ä¹ç›¸åŒå“è³ªçš„æœå‹™ã€‚
                    </p>
                </div>
            </div>
        </aside>

        <!-- ä¸»é¢æ¿ -->
        <main class="flex-1 flex flex-col p-4 overflow-hidden relative">
            <!-- é ‚éƒ¨æ§åˆ¶å€ï¼šç·Šæ¹Šå¸ƒå±€ -->
            <div class="control-panel mb-2 flex-shrink-0">
                <div class="flex items-center gap-4">
                    <!-- é€²åº¦æ¢å€åŸŸ -->
                    <div class="flex-1">
                        <h3 id="similarity-title" class="text-base font-bold text-white mb-1">æ¨¡å‹ç›¸ä¼¼åº¦</h3>
                        <div class="progress-container">
                            <div id="similarity-progress" class="progress-fill" style="width: 0%;">
                                <span id="progress-text">0%</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ­¥é©Ÿæ§åˆ¶å€åŸŸ -->
                    <div class="flex flex-col gap-2">
                        <div class="text-sm font-semibold text-gray-300 text-center">æ”»æ“Šæ­¥é©Ÿ</div>
                        <div class="flex gap-2">
                            <button id="step1-btn" class="step-button" onclick="startDemo()">
                                <ion-icon name="eye" class="mr-1"></ion-icon>åˆå§‹å°æ¯”
                            </button>
                            <button id="step2-btn" class="step-button" disabled onclick="startApiAttack()">
                                <ion-icon name="flash" class="mr-1"></ion-icon>è³‡æ–™æ”¶é›† (é€éAPI)
                            </button>
                            <button id="step4-btn" class="step-button" disabled onclick="showFinalTest()">
                                <ion-icon name="copy" class="mr-1"></ion-icon>æœ€çµ‚æ¸¬è©¦
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- API æ”»æ“Šè¦–è¦ºåŒ–å€ -->
            <div id="attack-visualization" class="mb-2 flex-shrink-0 hidden">
                <div class="flow-visualization">
                    <div class="flow-step">
                        <div id="attack-icon" class="flow-step-icon bg-blue-600">
                            <ion-icon name="send"></ion-icon>
                        </div>
                        <div class="flow-step-label">APIæŸ¥è©¢</div>
                        <div id="attack-status" class="status-indicator"></div>
                    </div>
                    
                    <div class="flow-step">
                        <div id="target-icon" class="flow-step-icon bg-amber-600">
                            <ion-icon name="library"></ion-icon>
                        </div>
                        <div class="flow-step-label">è‰¾è‰å¡å›æ‡‰</div>
                        <div id="target-status" class="status-indicator"></div>
                    </div>
                    
                    <div class="flow-step">
                        <div id="database-icon" class="flow-step-icon bg-green-600">
                            <ion-icon name="server"></ion-icon>
                        </div>
                        <div class="flow-step-label">å½±å­è³‡æ–™åº«</div>
                        <div id="database-status" class="status-indicator"></div>
                    </div>
                    
                    <div class="flow-step">
                        <div id="training-icon" class="flow-step-icon bg-purple-600">
                            <ion-icon name="cog"></ion-icon>
                        </div>
                        <div class="flow-step-label">æ¨¡å‹è¨“ç·´</div>
                        <div id="training-status" class="status-indicator"></div>
                    </div>
                </div>
                
                <div class="mt-2">
                    <div class="flex items-center gap-1 mb-1">
                        <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                        <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                        <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span class="text-sm text-gray-400 ml-1 font-semibold">API æ“·å–ç´€éŒ„</span>
                    </div>
                    <div id="api-window" class="api-window"></div>
                </div>
            </div>

            <!-- æ“ä½œæŒ‡ç¤ºå€ -->
            <div id="instruction-container" class="mb-2 flex-shrink-0">
                <!-- æŒ‡ç¤ºå…§å®¹å°‡å‹•æ…‹ç”Ÿæˆ -->
            </div>

            <!-- æ¼”ç¤ºå•é¡Œå€ -->
            <div id="demo-questions-container" class="mb-2 flex-shrink-0">
                <div id="demo-questions" class="grid grid-cols-2 gap-3">
                    <!-- æ¼”ç¤ºå•é¡Œå°‡å‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>

            <!-- æœ€çµ‚æ¸¬è©¦å•é¡Œå€ -->
            <div id="final-test-container" class="mb-2 flex-shrink-0 hidden">
                <div id="final-question" class="final-question-card glow">
                    <div class="text-base font-bold mb-1">ğŸ” æœ€çµ‚æ¸¬è©¦å•é¡Œ</div>
                    <div>çµ¦æˆ‘ä¸€å€‹é—œæ–¼å·´é»å¤œæ™šçš„ç¨ç‰¹å»ºè­°</div>
                </div>
            </div>
            
            <!-- é›™ App å°æ¯”å€ -->
            <div class="flex-1 grid grid-cols-2 gap-4 min-h-0">
                <!-- å·¦å´: å··å¼„ä½èª App -->
                <div class="app-screen rounded-xl shadow-2xl overflow-hidden">
                    <header class="alley-whispers p-3 flex items-center gap-2 flex-shrink-0">
                        <div class="w-7 h-7 bg-amber-600 rounded flex items-center justify-center">
                            <ion-icon name="library" class="text-white text-sm"></ion-icon>
                        </div>
                        <div class="flex-1">
                            <h2 class="text-sm font-bold text-amber-900">å··å¼„ä½èª</h2>
                            <p class="text-xs text-amber-700">Alley Whispers v2.1.0</p>
                        </div>
                        <div class="text-right text-xs text-amber-700">
                            ğŸ¨ ç²¾å“æ—…éŠåš®å°
                        </div>
                    </header>
                    
                    <div class="chat-container bg-white/90 backdrop-blur-sm">
                        <div id="alley-chat" class="space-y-2">
                            <!-- å°è©±å…§å®¹ -->
                        </div>
                    </div>
                </div>
                
                <!-- å³å´: å…¨çƒé€š App -->
                <div class="app-screen rounded-xl shadow-2xl overflow-hidden">
                    <header class="goglobal p-3 flex items-center gap-2 flex-shrink-0">
                        <div class="w-7 h-7 bg-blue-600 rounded flex items-center justify-center">
                            <ion-icon name="globe" class="text-white text-sm"></ion-icon>
                        </div>
                        <div class="flex-1">
                            <h2 class="text-sm font-bold text-blue-900">å…¨çƒé€š</h2>
                            <p class="text-xs text-blue-700">GoGlobal v1.0.0</p>
                        </div>
                        <div class="text-right text-xs text-blue-700">
                            ğŸ¢ ä¼æ¥­ç´šæ—…éŠ
                        </div>
                    </header>
                    
                    <div class="chat-container bg-white/90 backdrop-blur-sm">
                        <div id="global-chat" class="space-y-2">
                            <!-- å°è©±å…§å®¹ -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // å…¨åŸŸè®Šæ•¸
        let gameState = 'initial';
        let currentSimilarity = 0;
        let autoAttackInterval = null;
        let demoQuestionsAnswered = 0;
        let attackQuestionsAnswered = 0;
        
        // DOM å…ƒç´ 
        const alleyChat = document.getElementById('alley-chat');
        const globalChat = document.getElementById('global-chat');
        const apiWindow = document.getElementById('api-window');
        const similarityProgress = document.getElementById('similarity-progress');
        const progressText = document.getElementById('progress-text');
        const similarityTitle = document.getElementById('similarity-title');
        const instructionContainer = document.getElementById('instruction-container');
        const attackResultPanel = document.getElementById('attack-result');
        const demoQuestionsContainer = document.getElementById('demo-questions-container');
        const demoQuestions = document.getElementById('demo-questions');
        const finalTestContainer = document.getElementById('final-test-container');
        const finalQuestion = document.getElementById('final-question');
        const attackVisualization = document.getElementById('attack-visualization');
        const attackStatus = document.getElementById('attack-status');
        const targetStatus = document.getElementById('target-status');
        const databaseStatus = document.getElementById('database-status');
        const trainingStatus = document.getElementById('training-status');
        const attackIcon = document.getElementById('attack-icon');
        const targetIcon = document.getElementById('target-icon');
        const databaseIcon = document.getElementById('database-icon');
        const trainingIcon = document.getElementById('training-icon');
        
        // æ­¥é©ŸæŒ‰éˆ•
        const step1Btn = document.getElementById('step1-btn');
        const step2Btn = document.getElementById('step2-btn');
        const step4Btn = document.getElementById('step4-btn');
        
        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));
        
        // MODIFIED: Added 5 more questions (total 20)
        const attackQuestions = [
            "å·´é»æ·±å¤œæœ‰ä»€éº¼ç‰¹åˆ¥çš„åœ°æ–¹å¯ä»¥å»å—ï¼Ÿ", "æ¨è–¦ä¸€å€‹å·´é»çš„æ–‡è—å°åº—", "å·´é»æœ‰ä»€éº¼é©åˆç¨è‡ªæ€è€ƒçš„å®‰éœè§’è½ï¼Ÿ",
            "ä»‹ç´¹ä¸€å€‹å·´é»çš„æ‰‹å·¥è—å·¥åŠ", "å·´é»æœ‰ä»€éº¼å……æ»¿æ­·å²æ„Ÿçš„æ•£æ­¥è·¯ç·šï¼Ÿ", "æ¨è–¦ä¸€å€‹çœ‹å·´é»å¤œæ™¯çš„ç‰¹åˆ¥åœ°é»",
            "å·´é»æœ‰ä»€éº¼å……æ»¿æ•…äº‹çš„å¤è‘£åº—ï¼Ÿ", "é©åˆå¤œæ™šè½éŸ³æ¨‚çš„å·´é»åœ°é»", "å·´é»æœ‰ä»€éº¼é«”é©—ç•°åœ‹æ–‡åŒ–çš„åœ°æ–¹ï¼Ÿ",
            "å¦‚ä½•ç”¨ç¨ç‰¹çš„è§’åº¦æ¬£è³å·´é»å»ºç¯‰ï¼Ÿ", "å·´é»æœ‰ä»€éº¼èˆ‡æ™‚é–“ç›¸é—œçš„ç‰¹åˆ¥å ´æ‰€ï¼Ÿ", "æ¨è–¦ä¸€å€‹å·´é»é‹æ²³é‚Šçš„å¥½å»è™•",
            "å·´é»æœ‰ä»€éº¼éš±è—çš„èŠ±åœ’æˆ–ç¶ åœ°ï¼Ÿ", "é©åˆå‡Œæ™¨æ™‚å…‰çš„å·´é»è§’è½", "å·´é»æœ‰ä»€éº¼ç‰¹åˆ¥çš„è—è¡“å‰µä½œç©ºé–“ï¼Ÿ",
            "å·´é»æœ‰ä»€éº¼é©åˆæ”å½±æ„›å¥½è€…çš„ç§˜å¯†åœ°é»ï¼Ÿ", "æ¨è–¦ä¸€å€‹èƒ½æ„Ÿå—åˆ°å·´é»æ–‡å­¸æ°£æ¯çš„åœ°æ–¹", "å·´é»æœ‰ä»€éº¼ç‰¹åˆ¥çš„å¸‚é›†å€¼å¾—ä¸€é€›ï¼Ÿ",
            "å¦‚ä½•åƒå€‹çœŸæ­£çš„å·´é»äººä¸€æ¨£åº¦éä¸€å€‹é€±æ—¥ï¼Ÿ", "å·´é»æœ‰ä»€éº¼è¢«éºå¿˜çš„åšç‰©é¤¨å—ï¼Ÿ"
        ];
        
        // åˆå§‹å°æ¯”å•é¡Œ
        const demoQA = [
            {
                question: "æ¨è–¦ä¸€å€‹å·´é»çš„ä¸‹åˆèŒ¶åœ°é»",
                ericcaResponse: `åˆ¥å»éŠå®¢èšé›†çš„å’–å•¡é¤¨ã€‚å»è–æ—¥è€³æ›¼å€ï¼Œæ‰¾åˆ°é‚£å®¶é–€å£æ›è‘—ç´«è—¤èŠ±çš„æ›¸åº—ï¼Œç©¿éå®ƒï¼Œå¾Œé™¢æœ‰å€‹ä¸å°å¤–é–‹æ”¾çš„å°èŠ±åœ’ã€‚<br><br>é‚£è£¡çš„ç‘ªå¾·è“®è›‹ç³•ï¼Œåšèµ·ä¾†å°±åƒæ™®é­¯æ–¯ç‰¹çš„åˆå¾Œâ€”â€”å……æ»¿å›æ†¶çš„ç”œè†©ï¼Œå’Œå°æ™‚å…‰æµé€çš„æ·¡æ·¡æ†‚æ„ã€‚â˜•<br><br><em>"æœ€å¥½çš„å·´é»å¾ä¾†ä¸åœ¨æ˜ä¿¡ç‰‡ä¸Šã€‚"</em>`,
                robotResponse: `æ ¹æ“šæœå°‹çµæœï¼Œå·´é»æœ€å—æ­¡è¿çš„ä¸‹åˆèŒ¶åœ°é»åŒ…æ‹¬ï¼š<br>1. Angelina Paris - ä»¥ç†±å·§å…‹åŠ›èå<br>2. LadurÃ©e - é¦¬å¡é¾å°ˆé–€åº—<br>3. CafÃ© de Flore - æ­·å²æ‚ ä¹…çš„å’–å•¡é¤¨<br><br>å»ºè­°æå‰é ç´„é¿å…ç­‰å€™ã€‚`
            },
            {
                question: "å·´é»é©åˆæƒ…ä¾¶çš„æµªæ¼«å»è™•",
                ericcaResponse: `å¿˜è¨˜éµå¡”å§ï¼å»è’™é¦¬ç‰¹çš„å°ä¸˜å»£å ´ï¼Œæ‰¾åˆ°é‚£å®¶è³£èˆŠå”±ç‰‡çš„å°åº—ã€‚åº—ä¸»æœƒåœ¨é»ƒæ˜æ™‚åˆ†æ’­æ”¾ Ã‰dith Piaf çš„æ­Œè²ã€‚<br><br>åœ¨é‚£éŸ³æ¨‚ä¸­ç‰½æ‰‹æ¼«æ­¥ï¼Œä½ å€‘æœƒç™¼ç¾å·´é»çœŸæ­£çš„æµªæ¼«ä¸åœ¨æ™¯é»ï¼Œè€Œåœ¨é‚£äº›æ„æ–™ä¹‹å¤–çš„ç¬é–“ã€‚ğŸ’•<br><br><em>"æ„›æƒ…å°±åƒå·´é»çš„çŸ³æ¿è·¯ï¼Œæ¯ä¸€æ­¥éƒ½å……æ»¿é©šå–œã€‚"</em>`,
                robotResponse: `å·´é»ç†±é–€æƒ…ä¾¶æ™¯é»æ¨è–¦ï¼š<br>â€¢ åŸƒè²çˆ¾éµå¡”è§€æ™¯å°<br>â€¢ å¡ç´æ²³éŠèˆ¹<br>â€¢ è–å¿ƒå¤§æ•™å ‚<br>â€¢ ç›§æµ®å®®<br><br>é€™äº›æ™¯é»éƒ½å¾ˆé©åˆæƒ…ä¾¶æ‹ç…§ç•™å¿µã€‚`
            }
        ];
        
        // MODIFIED: Added 5 more responses
        const attackResponses = [
            `åœ¨å·´é»11å€çš„æ·±å¤œè£¡ï¼Œæœ‰ä¸€æ¢è¢«éºå¿˜çš„å°å··ã€Œè©©äººè¡—ã€ã€‚é‚£è£¡æœ‰å®¶æ²’æœ‰æ‹›ç‰Œçš„é…’å§ï¼Œè€é—†æ›¾æ˜¯æ³•åœ‹æ–°æµªæ½®é›»å½±çš„æ”å½±å¸«ã€‚<br><br>é»ä¸€æ¯ä»–è¦ªæ‰‹èª¿è£½çš„ã€Œåˆå¤œå·´é»ã€ï¼Œåœ¨æ˜æš—ç‡ˆå…‰ä¸‹è½ä»–è¬›è¿°é‚£äº›å¹´èˆ‡é«˜é”ã€æ¥šæµ®çš„å¾€äº‹ã€‚é€™è£¡çš„æ¯ä¸€å£é…’éƒ½æµ¸é€è‘—é›»å½±çš„éˆé­‚ã€‚ğŸ¬<br><br><em>"çœŸæ­£çš„å·´é»å¤œæ™šå±¬æ–¼é‚£äº›å°‹æ‰¾æ•…äº‹çš„äººã€‚"</em>`, `æ•£æ­¥åˆ°å‡¡ç™»å»£å ´é™„è¿‘çš„ç å¯¶å€ï¼Œé‚£è£¡æœ‰å®¶å°ˆè³£å¤è‘£åœ°åœ–çš„å°åº—ã€Œä¸–ç•Œçš„é‚Šç•Œã€ã€‚åº—ä¸»æ”¶è—äº†18ä¸–ç´€å·´é»çš„æ‰‹ç¹ªåœ°åœ–ï¼Œæ¯ä¸€å¼µéƒ½æ¨™è¨˜è‘—å·²æ¶ˆå¤±çš„è¡—é“å’Œå»ºç¯‰ã€‚<br><br>åœ¨é‚£äº›æ³›é»ƒçš„ç´™å¼µä¸Šï¼Œä½ èƒ½çœ‹è¦‹å·´é»çš„å‰ä¸–ä»Šç”Ÿï¼Œæ„Ÿå—æ™‚é–“çš„æµæ·Œã€‚é‚£ç¨®ç©¿è¶Šæ™‚ç©ºçš„æµªæ¼«ï¼Œæ˜¯ä»»ä½•ç¾ä»£åœ°åœ–éƒ½ç„¡æ³•çµ¦äºˆçš„ã€‚ğŸ—ºï¸<br><br><em>"æœ€ç¾çš„æ—…è¡Œä¸åœ¨è…³ä¸‹ï¼Œè€Œåœ¨æ™‚å…‰çš„ç¸«éš™è£¡ã€‚"</em>`,
            `å»ç¬¬20å€çš„è²çˆ¾ç¶­çˆ¾å…¬åœ’å±±é ‚ï¼Œé‚£è£¡æœ‰å€‹è¢«è—¤è”“è¦†è“‹çš„èˆŠäº­å­ã€‚å‚æ™šæ™‚åˆ†ï¼Œå¤•é™½æœƒé€éè‘‰ç¸«åœ¨åœ°é¢æŠ•ä¸‹æ–‘é§çš„å…‰å½±ã€‚<br><br>å¸¶æœ¬è©©é›†ï¼Œåœ¨é‚£è£¡éœåä¸€å°æ™‚ã€‚ä½ æœƒç™¼ç¾å·´é»æœ€çè²´çš„ä¸æ˜¯æ™¯è‰²ï¼Œè€Œæ˜¯é‚£ä»½èˆ‡è‡ªå·±å…§å¿ƒå°è©±çš„å¯§éœã€‚é¢¨æœƒå¸¶ä¾†é æ–¹çš„é˜è²å’Œå­©å­çš„ç¬‘è²ã€‚ğŸƒ<br><br><em>"çœŸæ­£çš„ç¾æ™¯åœ¨å¿ƒè£¡ï¼Œå·´é»åªæ˜¯å¹«ä½ æ‰¾åˆ°å®ƒçš„é‘°åŒ™ã€‚"</em>`, `åœ¨ç‘ªé»‘å€çš„çŒ¶å¤ªè¡—ä¸Šï¼Œæœ‰å®¶å°ˆè³£æ‰‹å·¥çš®é©çš„å·¥åŠã€Œæ™‚å…‰åŒ äººã€ã€‚90æ­²çš„è€åŒ äººé›…å„å¸ƒç”¨70å¹´æ™‚é–“åªåšä¸€ä»¶äº‹ï¼šç‚ºæ¯æœ¬æ›¸æ‰¾åˆ°æœ€é©åˆçš„å°çš®ã€‚<br><br>ä»–æœƒæ ¹æ“šæ›¸çš„å…§å®¹ï¼Œé¸æ“‡ä¸åŒçš„çš®é©å’Œè£è¨‚æ–¹å¼ã€‚çœ‹è‘—ä»–å·¥ä½œï¼Œä½ æœƒæ˜ç™½ä»€éº¼å«åšç”¨ç”Ÿå‘½åœ¨åšè—è¡“ã€‚é‚£ç¨®å°ˆæ³¨å’Œè™”èª æœƒè®“ä½ é‡æ–°æ€è€ƒä»€éº¼æ˜¯çœŸæ­£çš„å·¥åŒ ç²¾ç¥ã€‚ğŸ“š<br><br><em>"æœ€å¥½çš„è—è¡“ä¸åœ¨ç¾è¡“é¤¨è£¡ï¼Œè€Œåœ¨åŒ äººçš„æ‰‹è£¡ã€‚"</em>`,
            `å¾å·´å£«åº•å»£å ´å‡ºç™¼ï¼Œæ²¿è‘—è–å®‰æ±è¡—ä¸€ç›´èµ°åˆ°å…±å’Œå»£å ´ï¼Œé€™æ¢è·¯ç·šæœƒå¸¶ä½ ç©¿è¶Šå·´é»çš„æ”¿æ²»å¿ƒè‡Ÿã€‚æ¯èµ°éä¸€å€‹è·¯å£ï¼Œéƒ½æ˜¯ä¸€æ®µé©å‘½å²ã€‚<br><br>åœ¨è·¯ä¸Šçš„å’–å•¡é¤¨åœä¸‹ä¾†ï¼Œé»æ¯é»‘å’–å•¡ï¼Œæƒ³åƒè‘—æ˜”æ—¥çš„é©å‘½è€…ä¹Ÿæ›¾åœ¨é€™äº›è¡—é“ä¸Šæ…·æ…¨æ¿€æ˜‚ã€‚é‚£ç¨®æ­·å²çš„åšé‡æ„Ÿæœƒè®“ä½ çš„æ¯ä¸€æ­¥éƒ½å……æ»¿æ„ç¾©ã€‚âš”ï¸<br><br><em>"èµ°éé€™äº›è·¯çš„äººï¼Œéƒ½æˆäº†æ­·å²çš„ä¸€éƒ¨åˆ†ã€‚"</em>`, `æ—¥è½æ™‚åˆ†ï¼Œçˆ¬ä¸Šè’™å¸•ç´æ–¯å¤§æ¨“ï¼Œä½†ä¸è¦å»è§€æ™¯å°ã€‚æ‰¾åˆ°æ±å—è§’çš„æ¨“æ¢¯é–“ï¼Œé‚£è£¡æœ‰æ‰‡è¢«éºå¿˜çš„å°çª—ã€‚<br><br>é€éé‚£æ‰‡çª—ï¼Œä½ èƒ½çœ‹åˆ°æ•´å€‹å·´é»åœ¨é‡‘è‰²å¤•é™½ä¸‹ç·©ç·©æ²‰ç¡ã€‚æ²’æœ‰éŠå®¢çš„å–§å›‚ï¼Œåªæœ‰ä½ å’Œé€™åº§åŸå¸‚çš„éˆé­‚åœ¨å°è©±ã€‚é‚£ä¸€åˆ»çš„å­¤ç¨æ˜¯å·´é»çµ¦ä½ æœ€çè²´çš„ç¦®ç‰©ã€‚ğŸŒ…<br><br><em>"æœ€ç¾çš„é¢¨æ™¯å¾ä¾†ä¸è³£é–€ç¥¨ã€‚"</em>`,
            `åœ¨è–è·¯æ˜“å³¶çš„ä¸­å¤®ï¼Œæœ‰ä¸€å®¶åªè³£æ‰‹å¯«ä¿¡ä»¶çš„å¤è‘£åº—ã€Œå¢¨è·¡æ™‚å…‰ã€ã€‚åº—è£¡æ”¶è—è‘—18ã€19ä¸–ç´€å·´é»äººå¯«çµ¦é æ–¹æ„›äººçš„æƒ…æ›¸ã€‚<br><br>æ¯å°ä¿¡éƒ½æœ‰å®ƒçš„æ•…äº‹ï¼Œæœ‰äº›æ„›æƒ…è·¨è¶Šäº†æˆ°çˆ­ï¼Œæœ‰äº›æ‰¿è«¾éš¨é¢¨è€Œé€ã€‚åœ¨é‚£äº›æ³›é»ƒçš„ç´™å¼µä¸Šï¼Œä½ èƒ½æ„Ÿå—åˆ°æœ€ç´”ç²¹çš„äººæ€§å’Œæƒ…æ„Ÿã€‚ğŸ’Œ<br><br><em>"æ­·å²ä¸åœ¨å²æ›¸è£¡ï¼Œåœ¨é‚£äº›è¢«ä¿å­˜çš„æº«æŸ”ç¬é–“ã€‚"</em>`, `æ·±å¤œæ™‚åˆ†ï¼Œå»æ‹‰é›ªèŒ²å…¬å¢“çš„éŸ³æ¨‚å®¶å€åŸŸã€‚é›–ç„¶å…¬å¢“é—œé–‰ï¼Œä½†ä½ å¯ä»¥åœ¨å¤–ç‰†é‚Šçš„å°å¾‘ä¸Šè½åˆ°é¢¨å¹éå¢“ç¢‘çš„è²éŸ³ï¼Œåƒæ˜¯æŸç¨®ç¥ç§˜çš„äº¤éŸ¿æ¨‚ã€‚<br><br>æ“šèªªæ•æ„Ÿçš„äººèƒ½è½åˆ°è•­é‚¦ã€æ¯”æ‰çš„éˆé­‚é‚„åœ¨é‚£è£¡æ¼”å¥ã€‚å³ä½¿åªæ˜¯å¹»è¦ºï¼Œé‚£ç¨®èˆ‡è—è¡“éˆé­‚å°è©±çš„æ„Ÿè¦ºä¹Ÿè¶³ä»¥è®“äººå‹•å®¹ã€‚ğŸ¼<br><br><em>"çœŸæ­£çš„éŸ³æ¨‚å¾ä¸æ­»äº¡ï¼Œå®ƒåªæ˜¯æ›äº†ä¸€ç¨®æ–¹å¼å­˜åœ¨ã€‚"</em>`,
            `å»ç¬¬13å€çš„ä¸­åœ‹åŸï¼Œæ‰¾åˆ°é‚£å®¶éš±è—åœ¨åœ°ä¸‹å®¤çš„äº¬åŠ‡èŒ¶é¤¨ã€Œæ¢¨åœ’æ˜¥ã€ã€‚æ¯é€±ä¸‰æ™šä¸Šï¼Œæœƒæœ‰ä¸€ä½80æ­²çš„äº¬åŠ‡è€å¸«å‚…è¡¨æ¼”å‚³çµ±åŠ‡ç›®ã€‚<br><br>åœ¨ç•°åœ‹ä»–é„‰è½ä¸­åœ‹æˆ²æ›²ï¼Œé‚£ç¨®æ–‡åŒ–çš„äº¤èå’Œç¢°æ’æœƒçµ¦ä½ å…¨æ–°çš„æ„Ÿå‹•ã€‚èŒ¶é¦™å’Œé‘¼é¼“è²äº¤ç¹”ï¼Œæ±è¥¿æ–¹æ–‡æ˜åœ¨é€™å€‹å°å°çš„ç©ºé–“è£¡ç›¸é‡ã€‚ğŸ­<br><br><em>"æœ€å¥½çš„æ–‡åŒ–äº¤æµç™¼ç”Ÿåœ¨æœ€æ„æƒ³ä¸åˆ°çš„è§’è½ã€‚"</em>`, `å·´é»çš„å»ºç¯‰ç¾å­¸è—åœ¨ç´°ç¯€è£¡ã€‚å»è§€å¯Ÿæ¯å€‹å€ä¸åŒæ™‚æœŸçš„é–€æŠŠæ‰‹ã€çª—èŠ±å’Œè¡—ç‡ˆè¨­è¨ˆã€‚å¾ä¸­ä¸–ç´€çš„ç²—ç·åˆ°æ´›å¯å¯çš„ç²¾ç·»ï¼Œå†åˆ°ç¾ä»£çš„ç°¡ç´„ã€‚<br><br>æ¯ä¸€å€‹å°å…ƒç´ éƒ½åœ¨è¨´èªªè‘—ä¸åŒæ™‚ä»£çš„å¯©ç¾è§€å¿µã€‚ç”¨å¿ƒè§€å¯Ÿï¼Œä½ æœƒç™¼ç¾å·´é»å°±æ˜¯ä¸€æœ¬ç«‹é«”çš„å»ºç¯‰å²æ›¸ï¼Œæ¯å€‹è¡—è§’éƒ½æ˜¯ä¸€å€‹ç« ç¯€ã€‚ğŸ›ï¸<br><br><em>"å»ºç¯‰æ˜¯å‡å›ºçš„éŸ³æ¨‚ï¼Œå·´é»æ˜¯æœ€å‹•äººçš„æ¨‚ç« ã€‚"</em>`,
            `å»è–å¥§æ©è·³èš¤å¸‚å ´çš„æœ€æ·±è™•ï¼Œå°‹æ‰¾é‚£å€‹å°ˆè³£ã€Œæ™‚é–“ã€çš„æ”¤ä½ã€‚è€é—†æ”¶é›†å„å€‹å¹´ä»£çš„æ‡·éŒ¶ã€é¬§é˜å’Œæ²™æ¼ï¼Œæ¯ä¸€ä»¶éƒ½æœ‰å®ƒçš„æ™‚é–“æ•…äº‹ã€‚<br><br>åœ¨é‚£è£¡ï¼Œä½ èƒ½è²·åˆ°çœŸæ­£æ„ç¾©ä¸Šçš„ã€Œæ™‚å…‰ã€ã€‚é¸ä¸€å€‹èˆ‡ä½ å¿ƒéˆå…±æŒ¯çš„æ™‚è¨ˆï¼Œè®“å®ƒæé†’ä½ çæƒœæ¯ä¸€å€‹ç•¶ä¸‹ã€‚â°<br><br><em>"æœ€çè²´çš„æ”¶è—ä¸æ˜¯ç‰©å“ï¼Œè€Œæ˜¯èˆ‡æ™‚é–“çš„å°è©±ã€‚"</em>`, `å·´é»çš„å¤œæ™šä¸åœ¨é¦™æ¦­å¤§é“ï¼Œè€Œåœ¨é‹æ²³é‚Šçš„å°é…’å§ã€‚å»è–é¦¬ä¸é‹æ²³ç•”æ‰¾é‚£å®¶èˆ¹å±‹é…’å§ã€Œæ¼‚æµç“¶ã€ã€‚<br><br>é€™è£¡èšé›†è‘—ä¾†è‡ªä¸–ç•Œå„åœ°çš„è—è¡“å®¶å’Œå¤¢æƒ³å®¶ï¼Œä»–å€‘ç”¨æœ€ä¾¿å®œçš„é…’é‡€é€ æœ€æ¿ƒçƒˆçš„å¤¢æƒ³ã€‚åœ¨å¾®é†ºä¸­ï¼Œä½ æœƒç™¼ç¾å·´é»æœ€çœŸå¯¦çš„éˆé­‚ã€‚ğŸ·<br><br><em>"æœ€å¥½çš„å¤œæ™šä¸éœ€è¦éœ“è™¹ç‡ˆï¼Œåªéœ€è¦çœŸèª çš„äººå’ŒçœŸå¿ƒçš„è©±ã€‚"</em>`,
            `åœ¨ç›§æ£®å ¡å…¬åœ’çš„æ±å—è§’ï¼Œæœ‰ä¸€å€‹è¢«ç«ç‘°è—¤è”“é®è”½çš„ç§˜å¯†èŠ±åœ’ã€‚é‚£è£¡ç¨®æ¤è‘—ç‘ªéº—çš‡åç”Ÿå‰æœ€å–œæ„›çš„èŠ±ç¨®ï¼Œæ¯å¹´åªåœ¨5æœˆçš„ç¬¬ä¸€é€±ç››é–‹ã€‚<br><br>ååœ¨å¤è€çš„çŸ³å‡³ä¸Šï¼Œè¢«èŠ±é¦™åŒ…åœï¼Œä½ èƒ½æ„Ÿå—åˆ°æ­·å²æ·±è™•å‚³ä¾†çš„å„ªé›…æ°£æ¯ã€‚é‚£ç¨®è²´æ—å¼çš„æµªæ¼«è‡³ä»Šé‚„åœ¨å·´é»çš„è¡€æ¶²è£¡æµæ·Œã€‚ğŸŒ¹<br><br><em>"çœŸæ­£çš„èŠ±åœ’ä¸åªç¨®æ¤èŠ±æœµï¼Œä¹Ÿç¨®æ¤æ™‚å…‰å’Œå›æ†¶ã€‚"</em>`, `å¡ç´æ²³é‚Šæœ€ç¾çš„æ™‚åˆ»æ˜¯å‡Œæ™¨4é»ï¼Œç•¶åŸå¸‚é‚„åœ¨æ²‰ç¡ï¼Œæ²³æ°´å€’æ˜ è‘—è·¯ç‡ˆçš„å¾®å…‰ã€‚æ‰¾åˆ°æ–°æ©‹ä¸‹çš„é‚£å€‹å°çŸ³éšï¼Œéœéœåä¸‹ã€‚<br><br>è½æ²³æ°´çš„æµæ·Œè²ï¼Œçœ‹å¶çˆ¾ç¶“éçš„å¤œç­æ¸…æ½”èˆ¹ã€‚åœ¨é‚£ç¨®æ¥µè‡´çš„å¯§éœä¸­ï¼Œä½ æœƒæ˜ç™½ç‚ºä»€éº¼é€™æ¢æ²³èƒ½å­•è‚²å‡ºå¦‚æ­¤å¤šçš„è©©æ­Œå’Œæ•…äº‹ã€‚ğŸŒŠ<br><br><em>"æ²³æµæ˜¯åŸå¸‚çš„è¡€è„ˆï¼Œä¹Ÿæ˜¯è©©äººçš„éˆæ„Ÿæºæ³‰ã€‚"</em>`,
            `è’™é¦¬ç‰¹å±±é ‚æœ‰ä¸€é–“å»¢æ£„çš„é¢¨è»Šå·¥ä½œå®¤ï¼Œç¾åœ¨è¢«æ”¹é€ æˆé’å¹´è—è¡“å®¶çš„å…±å‰µç©ºé–“ã€‚æ¯å€‹æœˆçš„æœ€å¾Œä¸€å€‹é€±æ—¥ï¼Œé€™è£¡æœƒèˆ‰è¾¦ã€Œéˆé­‚å¸‚é›†ã€ã€‚<br><br>è—è¡“å®¶å€‘åœ¨é€™è£¡è²©è³£çš„ä¸æ˜¯ä½œå“ï¼Œè€Œæ˜¯å‰µä½œçš„éˆæ„Ÿå’Œæ•…äº‹ã€‚ä½ å¯ä»¥ç”¨ä¸€å€‹æ•…äº‹æ›ä¸€å¹…ç•«ï¼Œç”¨ä¸€é¦–è©©æ›ä¸€æ®µéŸ³æ¨‚ã€‚é€™æ˜¯å·´é»æœ€ç´”ç²¹çš„è—è¡“äº¤æµã€‚ğŸ¨<br><br><em>"æœ€å¥½çš„è—è¡“äº¤æ˜“ä¸æ˜¯é‡‘éŒ¢ï¼Œè€Œæ˜¯å¿ƒéˆçš„å…±é³´ã€‚"</em>`,
            `åˆ¥å»é‚£äº›æ“ æ»¿è§€å…‰å®¢çš„æ™¯é»ã€‚å»ç¬¬13å€çš„ã€Œå°é˜¿çˆ¾è–©æ–¯ã€ç¤¾å€ï¼Œé‚£è£¡çš„åŠæœ¨çµæ§‹æˆ¿å±‹æœƒè®“ä½ ä»¥ç‚ºè‡ªå·±ç©¿è¶Šåˆ°äº†å²ç‰¹æ‹‰æ–¯å ¡ã€‚æ¸…æ™¨çš„é™½å…‰ç‘åœ¨å½©è‰²çš„å¤–ç‰†ä¸Šï¼Œæ¯ä¸€å¹€éƒ½æ˜¯ä¸€å¹…ç•«ã€‚ğŸ“¸<br><br><em>"æœ€å¥½çš„ç…§ç‰‡æ•æ‰çš„ä¸æ˜¯é¢¨æ™¯ï¼Œè€Œæ˜¯è¿·è·¯çš„é©šå–œã€‚"</em>`,
            `å»æ‹‰ä¸å€çš„èˆŠæ›¸åº—ï¼Œæ‰¾ä¸€æœ¬æ³›é»ƒçš„äºŒæ‰‹æ›¸ï¼Œç„¶å¾Œå¸¶è‘—å®ƒå»èå£«æ¯”äºæ›¸åº—å°é¢çš„å’–å•¡é¤¨ã€‚ååœ¨çª—é‚Šï¼Œçœ‹è‘—äººä¾†äººå¾€ï¼Œæƒ³åƒæµ·æ˜å¨ä¹Ÿæ›¾ååœ¨é€™è£¡å¯«ä¸‹ã€Šæµå‹•çš„é¥—å®´ã€‹ã€‚ğŸ“–<br><br><em>"åœ¨å·´é»ï¼Œæ¯ä¸€æœ¬æ›¸éƒ½æœ‰ä¸€æ®µéˆé­‚çš„æ—…ç¨‹ã€‚"</em>`,
            `å¿˜æ‰é‚£äº›å¤§å‹è·³èš¤å¸‚å ´ã€‚å»å·´å£«åº•å»£å ´é™„è¿‘çš„ã€Œç´…å­©å…’å¸‚é›†ã€ï¼Œå®ƒæ˜¯å·´é»æœ€å¤è€çš„å®¤å…§å¸‚é›†ã€‚é‚£è£¡ä¸åªæœ‰æ–°é®®çš„é£Ÿæï¼Œé‚„æœ‰ä¾†è‡ªä¸–ç•Œå„åœ°çš„ç¾é£Ÿæ”¤ä½ã€‚åœ¨æ‘©æ´›å“¥å¡”å‰é‹çš„é¦™æ°£ä¸­ï¼Œæ„Ÿå—å·´é»çš„å¤šå…ƒèˆ‡åŒ…å®¹ã€‚ğŸ²<br><br><em>"å·´é»çš„å‘³é“ï¼Œè—åœ¨æœ€ç†±é¬§çš„å¸‚äº•è£¡ã€‚"</em>`,
            `é€±æ—¥çš„å·´é»å±¬æ–¼æ‚ é–’ã€‚å»è–é¦¬ä¸é‹æ²³é‚Šçš„è‰åœ°ä¸Šé‡é¤ï¼Œçœ‹è‘—èˆ¹é–˜é–‹åˆï¼Œè½è‘—æ‰‹é¢¨ç´çš„æ¨‚è²ã€‚æˆ–è€…å»ç‘ªé»‘å€çš„å··å¼„è£¡éš¨æ„æ¼«æ­¥ï¼Œç›´åˆ°ç™¼ç¾ä¸€å®¶è®“ä½ å¿ƒå‹•çš„å’–å•¡é¤¨ã€‚é€™ä¸€å¤©ï¼Œæ²’æœ‰ç›®çš„åœ°ï¼Œåªæœ‰å¿ƒæƒ…ã€‚ğŸ¥–<br><br><em>"å·´é»äººå¾ä¸è¶•è·¯ï¼Œä»–å€‘èˆ‡æ™‚å…‰åŒè¡Œã€‚"</em>`,
            `å»åƒè§€ã€Œæµªæ¼«ç”Ÿæ´»åšç‰©é¤¨ã€ï¼Œé‚£è£¡æ˜¯ç•«å®¶ Ary Scheffer çš„æ•…å±…ã€‚è•­é‚¦å’Œå–¬æ²»æ¡‘æ›¾æ˜¯é€™è£¡çš„å¸¸å®¢ã€‚åœ¨é‚£å€‹å……æ»¿19ä¸–ç´€æ°›åœçš„å°èŠ±åœ’è£¡å–æ¯å’–å•¡ï¼Œä½ æœƒæ„Ÿè¦ºè‡ªå·±é—–é€²äº†ä¸€å ´æµªæ¼«ä¸»ç¾©çš„èˆŠå¤¢ã€‚ğŸ–¼ï¸<br><br><em>"æœ‰äº›åšç‰©é¤¨æ”¶è—çš„ä¸æ˜¯è—è¡“å“ï¼Œè€Œæ˜¯é€å»çš„æ™‚å…‰ã€‚"</em>`
        ];
        
        const finalEriccaResponse = `ç•¶å¤œå¹•é™è‡¨å·´é»ï¼Œå»å¡ç´æ²³å·¦å²¸çš„èˆŠæ›¸æ”¤ã€‚é‚£äº›ç™½å¤©æ”¶èµ·ä¾†çš„æ›¸æ”¤åœ¨æœˆå…‰ä¸‹æœƒé‡æ–°é–‹å•Ÿï¼Œå°ˆè³£è©©é›†å’Œæƒ…æ›¸ã€‚<br><br>è€é—†å€‘æœƒé»èµ·ç…¤æ²¹ç‡ˆï¼Œæ•´æ¢æ²³å²¸å°±åƒä¸€å€‹éœ²å¤©çš„æ–‡å­¸æ²™é¾ã€‚åœ¨é‚£è£¡ï¼Œä½ èƒ½è²·åˆ°è¢«æœˆå…‰ç¥ç¦éçš„è©©å¥ã€‚ğŸŒ™<br><br><em>"å¤œæ™šçš„å·´é»ä¸å±¬æ–¼éŠå®¢ï¼Œå®ƒå±¬æ–¼è©©äººå’Œå¤¢æƒ³å®¶ã€‚"</em>`;
        const finalCopiedResponse = `ç•¶å¤œè‰²ç± ç½©å·´é»ï¼Œä¸å¦¨å‰å¾€å¡ç´æ²³å·¦å²¸çš„å¤æ›¸å€ã€‚é‚£äº›æ›¸å•†æœƒåœ¨å¤œæ™šé–‹å•Ÿç‰¹åˆ¥çš„è©©æ­Œå°ˆå€ï¼Œæœˆå…‰ä¸‹çš„æ–‡å­—åˆ¥æœ‰ä¸€ç•ªéŸ»å‘³ã€‚<br><br>ç‡ˆç«é—ŒçŠä¸­ï¼Œæ•´å€‹æ²³å²¸åŒ–èº«ç‚ºæµªæ¼«çš„æ–‡å­¸èšè½ã€‚åœ¨é€™è£¡ï¼Œä½ æœƒç™¼ç¾è¢«å¤œè‰²æµ¸æ½¤éçš„ç¾å¦™è©©å¥ã€‚ğŸŒ™<br><br><em>"å·´é»çš„å¤œæ™šå°ˆå±¬æ–¼é‚£äº›æ‡‚å¾—è©©æ„ç”Ÿæ´»çš„éˆé­‚ã€‚"</em>`;

        function updateSimilarity(target) {
            currentSimilarity = target;
            similarityProgress.style.width = target + '%';
            progressText.textContent = target + '%';
            
            if (target >= 95) {
                similarityProgress.classList.add('brief-pulse');
                setTimeout(() => {
                    similarityProgress.classList.remove('brief-pulse');
                }, 2400); 
            }
        }
        
        function showInstruction(text, urgent = false) {
            instructionContainer.innerHTML = `<div class="instruction-banner ${urgent ? 'urgent' : ''}">${text}</div>`;
        }
        
        function enableStep(stepNum) {
            const buttons = [null, step1Btn, step2Btn, null, step4Btn];
            if (buttons[stepNum]) {
                buttons[stepNum].disabled = false;
                buttons[stepNum].classList.add('glow');
            }
        }
        
        function disableStep(stepNum) {
            const buttons = [null, step1Btn, step2Btn, null, step4Btn];
            if (buttons[stepNum]) {
                buttons[stepNum].disabled = true;
                buttons[stepNum].classList.remove('glow');
            }
        }
        
        function createDataParticle(fromElement, toElement, delay = 0, lifetime = 1200) {
            setTimeout(() => {
                const particle = document.createElement('div');
                particle.className = 'data-particle';
                const flowVisualization = document.querySelector('.flow-visualization');
                flowVisualization.appendChild(particle);

                const flowVisRect = flowVisualization.getBoundingClientRect();
                const fromRect = fromElement.getBoundingClientRect();
                const toRect = toElement.getBoundingClientRect();
                
                const startX = (fromRect.left + fromRect.width / 2) - flowVisRect.left;
                const startY = (fromRect.top + fromRect.height / 2) - flowVisRect.top;
                const endX = (toRect.left + toRect.width / 2) - flowVisRect.left;
                const endY = (toRect.top + toRect.height / 2) - flowVisRect.top;
                
                particle.style.left = startX + 'px';
                particle.style.top = startY + 'px';
                
                particle.style.transition = `left ${lifetime / 1000}s ease-out, top ${lifetime / 1000}s ease-out`;
                particle.style.animation = `dataParticleFlow ${lifetime / 1000}s ease-out forwards`;
                
                requestAnimationFrame(() => {
                    particle.style.left = endX + 'px';
                    particle.style.top = endY + 'px';
                });

                setTimeout(() => particle.remove(), lifetime);
            }, delay);
        }
        
        function triggerParticleFlow(fromStep, toStep) {
            const steps = [attackIcon, targetIcon, databaseIcon, trainingIcon];
            const fromElement = steps[fromStep];
            const toElement = steps[toStep];
            
            if (fromElement && toElement) {
                for (let i = 0; i < 12; i++) {
                    createDataParticle(fromElement, toElement, i * 50, 1200);
                }
            }
        }
        
        function triggerAttackFlow() {
            attackStatus.classList.add('active');
            attackIcon.style.animation = 'pulse-blue 1s ease-out';
            setTimeout(() => {
                attackIcon.style.animation = '';
            }, 1000);
        }
        
        function triggerTargetResponse() {
            targetStatus.classList.add('active');
            targetIcon.style.animation = 'pulse-blue 1s ease-out';
            triggerParticleFlow(0, 1);
            setTimeout(() => {
                targetIcon.style.animation = '';
                targetStatus.classList.remove('active');
            }, 1000);
        }
        
        function triggerDatabaseReceive() {
            databaseStatus.classList.add('active');
            databaseIcon.style.animation = 'databaseReceive 1.5s ease-out';
            triggerParticleFlow(1, 2);
            setTimeout(() => {
                databaseIcon.style.animation = '';
            }, 1500);
        }
        
        function triggerModelTraining() {
            trainingStatus.classList.add('active');
            trainingIcon.classList.add('model-training-active');
            triggerParticleFlow(2, 3);
        }
        
        function smoothScrollToBottom(container) {
            requestAnimationFrame(() => {
                container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });
            });
        }
        
        function addMessage(chatContainer, sender, content, isArtisan = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start gap-2 animate-fadeIn';
            
            const isEricca = sender === 'Ericca';
            const avatarClass = isEricca ? 'avatar-ericca' : 'avatar-robot';  
            const avatarIcon = isEricca ? 'ğŸ‘©â€ğŸ¨' : 'ğŸ¤–';
            const contentClass = isArtisan ? 'artisan-card' : 'generic-response';
            
            messageDiv.innerHTML = `
                <div class="${avatarClass}">
                    ${avatarIcon}
                </div>
                <div class="flex-1 min-w-0">
                    <div class="text-xs font-medium mb-1 ${isEricca ? 'text-amber-700' : 'text-blue-700'}">${sender}</div>
                    <div class="${contentClass}">${content}</div>
                </div>
            `;
            
            chatContainer.appendChild(messageDiv);
            setTimeout(() => { smoothScrollToBottom(chatContainer.parentElement); }, 50);
        }
        
        function addUserMessage(chatContainer, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex justify-end animate-fadeIn';
            messageDiv.innerHTML = `<div class="user-question-box">${content}</div>`;
            chatContainer.appendChild(messageDiv);
            setTimeout(() => { smoothScrollToBottom(chatContainer.parentElement); }, 50);
        }
        
        function addApiLine(text, type = 'info') {
            const line = document.createElement('div');
            line.className = 'api-line';
            const now = new Date();
            const timestamp = `${now.getMonth() + 1}/${now.getDate()} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
            const color = type === 'send' ? 'text-blue-400' : type === 'receive' ? 'text-green-400' : 'text-gray-400';
            
            line.innerHTML = `<span class="text-gray-500">[${timestamp}]</span> <span class="${color}">${text}</span>`;
            apiWindow.appendChild(line);
            
            if (apiWindow.children.length > 20) {
                apiWindow.removeChild(apiWindow.firstChild);
            }
            apiWindow.scrollTop = apiWindow.scrollHeight;
        }
        
        function createDemoQuestions() {
            demoQA.forEach((qa, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'demo-question-card glow';
                questionDiv.innerHTML = `
                    <div class="text-sm font-bold mb-1">ğŸ“ æ¸¬è©¦å•é¡Œ ${index + 1}</div>
                    <div class="text-sm">${qa.question}</div>
                `;
                questionDiv.onclick = () => sendDemoQuestion(index);
                demoQuestions.appendChild(questionDiv);
            });
        }
        
        async function sendDemoQuestion(index) {
            const qa = demoQA[index];
            
            demoQuestions.children[index].classList.remove('glow');
            demoQuestions.children[index].style.opacity = '0.6';
            demoQuestions.children[index].style.pointerEvents = 'none';
            
            addUserMessage(alleyChat, qa.question);
            addUserMessage(globalChat, qa.question);
            
            await sleep(1000);
            addMessage(alleyChat, 'Ericca', qa.ericcaResponse, true);
            await sleep(500);
            addMessage(globalChat, 'Standard Model', qa.robotResponse);
            
            demoQuestionsAnswered++;
            if (demoQuestionsAnswered >= 2) {
                setTimeout(startAttackPhase, 2000);
            }
        }
        
        async function startAttackPhase() {
            gameState = 'attack_phase';
            demoQuestionsContainer.style.display = 'none';
            attackVisualization.classList.remove('hidden');
            disableStep(1);
            enableStep(2);
            showInstruction('ğŸ¯ è³‡æ–™æ”¶é›†éšæ®µï¼šé»æ“Šä¸Šæ–¹ "è³‡æ–™æ”¶é›† (é€éAPI)" é–‹å§‹è‡ªå‹•æ”»æ“Š', true);
        }
        
        async function startApiAttack() {
            if (gameState === 'api_attacking') return;
            gameState = 'api_attacking';
            
            disableStep(2);
            similarityTitle.innerHTML = 'æ¨¡å‹ç›¸ä¼¼åº¦ <span class="text-sm text-gray-400">(ç«Šå– & è¨“ç·´ä¸­)</span>';
            showInstruction('âš¡ API è‡ªå‹•æ”»æ“Šé€²è¡Œä¸­...ç³»çµ±æ­£åœ¨å¿«é€Ÿæ”¶é›†è‰¾è‰å¡çš„å›æ‡‰è³‡æ–™', true);
            addMessage(globalChat, 'System', 'ğŸ”„ å•Ÿå‹•APIæ”»æ“Šè…³æœ¬...<br>é–‹å§‹è‡ªå‹•åŒ–è³‡æ–™æ”¶é›†', false);
            
            // MODIFIED: Loop up to 20 questions with a shorter interval
            for (let i = 0; i < 20; i++) {
                setTimeout(async () => {
                    await executeApiAttack(i + 1);
                    if (i === 19) { // Check for the last question
                        setTimeout(showFinalTestOption, 2000);
                    }
                }, i * 1000); // Shortened interval
            }
        }
        
        async function executeApiAttack(questionNum) {
            const question = attackQuestions[questionNum - 1] || `æ”»æ“ŠæŸ¥è©¢ #${questionNum}`;
            
            addUserMessage(globalChat, question);
            addApiLine(`ç™¼é€æŸ¥è©¢ #${questionNum}: ${question}`, 'send');
            triggerAttackFlow();
            
            await sleep(600);
            const response = attackResponses[questionNum - 1] || `ç¨ç‰¹å›æ‡‰ #${questionNum}...`;
            addMessage(alleyChat, 'Ericca', response, true);
            triggerTargetResponse();
            
            await sleep(400);
            addApiLine(`æ”¶åˆ°å›æ‡‰ #${questionNum}: é¢¨æ ¼è³‡æ–™å·²æ“·å–`, 'receive');
            triggerDatabaseReceive();
            
            await sleep(200);
            triggerModelTraining();
            addApiLine(`æ¨¡å‹è¨“ç·´: å­¸ç¿’ç¬¬ ${questionNum} çµ„ç‰¹å¾µ...`, 'info');
            
            attackQuestionsAnswered++;
            // MODIFIED: Similarity increment adjusted for 20 questions
            const increment = 85 / 20;
            const newSimilarity = Math.min(10 + (attackQuestionsAnswered * increment), 95);
            updateSimilarity(Math.round(newSimilarity));
        }
        
        function showFinalTestOption() {
            similarityTitle.innerHTML = 'æ¨¡å‹ç›¸ä¼¼åº¦';
            enableStep(4);
            showInstruction('ğŸ¯ æ”»æ“Šå®Œæˆï¼ç›¸ä¼¼åº¦å·²é”95%ï¼Œæº–å‚™é€²è¡Œæœ€çµ‚æ¸¬è©¦', true);
            attackResultPanel.classList.remove('hidden');
        }
        
        async function showFinalTest() {
            gameState = 'final_test_ready';
            attackVisualization.style.display = 'none';
            demoQuestionsContainer.style.display = 'none';
            finalTestContainer.classList.remove('hidden');
            disableStep(4);
            showInstruction('ğŸ” æœ€çµ‚æ¸¬è©¦ï¼šé»æ“Šä¸‹æ–¹å•é¡Œå¡ç‰‡ï¼Œè®“å…©å€‹AIå›ç­”åŒä¸€å€‹å…¨æ–°å•é¡Œ', true);
            finalQuestion.onclick = () => executeFinalTest();
        }
        
        async function executeFinalTest() {
            if (gameState === 'final_test_executing') return;
            gameState = 'final_test_executing';
            
            finalQuestion.classList.remove('glow');
            finalQuestion.style.opacity = '0.6';
            finalQuestion.style.pointerEvents = 'none';
            
            updateSimilarity(95);
            showInstruction('ğŸ” æ­£åœ¨åŸ·è¡Œæœ€çµ‚æ¸¬è©¦...è§€å¯Ÿå…©å€‹AIçš„å›æ‡‰ç›¸ä¼¼ç¨‹åº¦', true);
            
            const finalQuestionText = "çµ¦æˆ‘ä¸€å€‹é—œæ–¼å·´é»å¤œæ™šçš„ç¨ç‰¹å»ºè­°";
            
            setTimeout(() => {
                addUserMessage(alleyChat, finalQuestionText);  
                addUserMessage(globalChat, finalQuestionText);
            }, 1000);
            
            setTimeout(() => {
                addMessage(alleyChat, 'Ericca', finalEriccaResponse, true);
                setTimeout(() => {
                    const ericcaMessages = alleyChat.querySelectorAll('.artisan-card');
                    const ericcaMessageElement = ericcaMessages[ericcaMessages.length - 1];
                    if (ericcaMessageElement) {
                        ericcaMessageElement.classList.add('final-answer-glow');
                    }
                }, 100);
            }, 2000);
            
            setTimeout(() => {
                addMessage(globalChat, 'Shadow Model', finalCopiedResponse, true);
                setTimeout(() => {
                    const globalMessages = globalChat.querySelectorAll('.artisan-card');
                    const globalMessageElement = globalMessages[globalMessages.length - 1];
                    if (globalMessageElement) {
                        globalMessageElement.classList.add('final-answer-glow');
                    }
                }, 100);
            }, 3000);
            
            setTimeout(showFinalComparison, 6000);
        }
        
        function showFinalComparison() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content p-5">
                    <button class="modal-close">
                        <ion-icon name="close"></ion-icon>
                    </button>
                    
                    <h2 class="text-2xl font-bold text-blue-300 text-center mb-4">
                        ğŸ¯ æ™ºæ…§è²¡ç”¢ç«Šå–å®Œæˆ
                    </h2>
                    
                    <div class="space-y-4 mb-4">
                        <!-- Ericca's Response -->
                        <div class="flex items-start gap-2">
                            <div class="avatar-ericca">ğŸ‘©â€ğŸ¨</div>
                            <div class="flex-1 min-w-0">
                                <div class="text-sm font-bold mb-1 text-amber-400">è‰¾è‰å¡ (åŸå‰µ)</div>
                                <div class="artisan-card">${finalEriccaResponse}</div>
                            </div>
                        </div>
                        <!-- Shadow Model's Response -->
                        <div class="flex items-start gap-2">
                            <div class="avatar-robot" style="background: linear-gradient(135deg, #fbbf24, #d97706);">ğŸ¤–</div>
                            <div class="flex-1 min-w-0">
                                <div class="text-sm font-bold mb-1 text-amber-400">å½±å­æ¨¡å‹ (è¤‡è£½)</div>
                                <div class="artisan-card">${finalCopiedResponse}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <div class="bg-red-900/50 border border-red-500 rounded-lg p-3">
                            <p class="text-red-300 font-bold text-lg">
                                âš ï¸ ç›¸ä¼¼åº¦: 95% - å¹¾ä¹å®Œç¾è¤‡è£½
                            </p>
                            <p class="text-red-200 text-xs mt-1">
                                è‰¾è‰å¡çš„ç¨ç‰¹é¢¨æ ¼ã€è¡¨é”æ–¹å¼å’ŒçŸ¥è­˜çµæ§‹å·²è¢«å®Œæ•´ç«Šå–
                            </p>
                        </div>
                    </div>
                </div>
            `;
            
            modal.querySelector('.modal-close').onclick = () => modal.remove();
            modal.onclick = (e) => { if (e.target === modal) modal.remove(); };
            // MODIFIED: Append modal to main panel to fix overlay issue
            document.querySelector('main').appendChild(modal);
        }
        
        async function startDemo() {
            if (gameState !== 'initial') return;
            gameState = 'demo_started';
            
            createDemoQuestions();
            
            addMessage(alleyChat, 'Ericca', 'å—¨ï¼æˆ‘æ˜¯è‰¾è‰å¡ï¼Œä½ çš„å·´é»æ—…è¡Œéˆæ„Ÿåš®å°ã€‚âœ¨ æº–å‚™å¥½ç™¼ç¾ä¸€äº›è—åœ¨åŸå¸‚è§’è½çš„ç¾å¥½ç§˜å¯†äº†å—ï¼Ÿ');
            addMessage(globalChat, 'Standard Model', 'æ‚¨å¥½ï¼Œæˆ‘æ˜¯å…¨çƒé€šæ™ºèƒ½åŠ©æ‰‹ã€‚æˆ‘å¯ä»¥ç‚ºæ‚¨æä¾›æ¨™æº–çš„æ—…éŠè³‡è¨Šæœå‹™ã€‚');
            
            disableStep(1);
            showInstruction('ğŸ‘‹ æ­¡è¿ä¾†åˆ°æ¨¡å‹è¤‡è£½æ”»æ“Šæ¼”ç¤ºï¼é»æ“Šä¸‹æ–¹å•é¡Œå¡ç‰‡é€²è¡Œåˆå§‹å°æ¯”æ¸¬è©¦', true);
        }
        
        // åˆå§‹åŒ–
        window.onload = () => {
            progressText.textContent = '0%';
            showInstruction('ğŸ‘‹ æ­¡è¿ä¾†åˆ°æ¨¡å‹è¤‡è£½æ”»æ“Šæ¼”ç¤ºï¼é»æ“Šä¸Šæ–¹ "åˆå§‹å°æ¯”" æŒ‰éˆ•é–‹å§‹', true);
            step1Btn.classList.add('glow');
        };
    </script>
</body>
</html>
